(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{121:function(t,e,a){"use strict";a.r(e);var n,i,o=a(0),c=a.n(o),r=a(9),l=a.n(r),s=(a(92),a(93),a(160)),d=a(161),u=a(157),f=a(163),T=a(158),m=a(164),E=a(165),b=a(162),O=a(14),p=a(7),_=a(41),S=a(72),v=a.n(S);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(n||(n={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(i||(i={}));var k,j=v.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"4ecc4fdb-da6b-45f9-bb99-93bccea55cd4"}}),C=function(){return j.get("todo-lists").then((function(t){return t.data}))},h=function(t){return j.post("todo-lists",{title:t}).then((function(t){return t.data}))},I=function(t){return j.delete("todo-lists/".concat(t))},A=function(t,e){return j.put("todo-lists/".concat(t),{title:e})},g=function(t){return j.get("todo-lists/".concat(t,"/tasks"))},y=function(t,e){return j.post("todo-lists/".concat(t,"/tasks"),{title:e})},D=function(t,e,a){return j.put("todo-lists/".concat(t,"/tasks/").concat(e),Object(p.a)({},a))},w=function(t,e){return j.delete("todo-lists/".concat(t,"/tasks/").concat(e))},N={status:"idle",error:null},L=function(t){return{type:k.SET_STATUS,status:t}},R=function(t){return{type:k.SET_ERROR,error:t}};!function(t){t.SET_STATUS="todolist/appReducer/SET_STATUS",t.SET_ERROR="todolist/appReducer/SET_ERROR"}(k||(k={}));var H,K=function(t,e){t.messages.length?e(R(t.messages[0])):e(R("Some error occurred")),e(L("failed"))},x=function(t,e){e(L("failed")),e(R(t.message?t.message:"Some error occurred"))},G=[],U=function(t,e){return{type:"CHANGE_TODOLIST_FILTER_VALUE",id:t,newFilterValue:e}},V=a(159),M=a(122),z=a(34),B=a(17),F=a.n(B),P=a(166),Y=a(76),J=a.n(Y),q=c.a.memo((function(t){var e=t.addNewItem,a=t.disabled,n=void 0!==a&&a,i=Object(o.useState)(""),r=Object(z.a)(i,2),l=r[0],s=r[1],d=Object(o.useState)(""),f=Object(z.a)(d,2),T=f[0],m=f[1],E=(Object(O.c)((function(t){return t.app.status})),Object(o.useCallback)((function(t){t.trim()?(e(t),s("")):m("field is required")}),[e]));return c.a.createElement("div",{className:F.a.taskInput},c.a.createElement(P.a,{id:"outlined-error-helper-text",disabled:n,label:T?"error":"new task",variant:"outlined",color:"secondary",value:l,onChange:function(t){l.trim()&&m(null),s(t.currentTarget.value)},onKeyPress:function(t){m(null),l.trim()&&"Enter"===t.key&&(e(l),s(""))},error:Boolean(T)}),c.a.createElement(u.a,{onClick:function(){return E(l)},disabled:n},c.a.createElement(J.a,{color:"primary",style:{padding:"0px"}})),T?c.a.createElement("div",{className:F.a.error}," ",T," "):null)})),Q=a(78),X=c.a.memo((function(t){var e=t.title,a=t.changeItemText,n=Object(o.useState)(!1),i=Object(z.a)(n,2),r=i[0],l=i[1],s=Object(o.useState)(""),d=Object(z.a)(s,2),u=d[0],f=d[1],T=Object(o.useCallback)((function(){l(!0),f(e)}),[e]),m=Object(o.useCallback)((function(){l(!1),a(u)}),[a,u]);return c.a.createElement("div",null,r?c.a.createElement(P.a,{id:"standard-size-small",size:"small",onBlur:m,value:u,onChange:function(t){f(t.currentTarget.value)},autoFocus:!0}):c.a.createElement("div",{onDoubleClick:T},e))})),W=a(48),Z=a.n(W),$=c.a.memo((function(t){var e=t.removeTodolist,a=t.changeTodolistTitle,n=t.todolist,i=Object(o.useCallback)((function(){e(n.id)}),[e,n.id]),r=Object(o.useCallback)((function(t,e){a(t,e)}),[a]);return c.a.createElement("div",{className:F.a.todolistHeader},c.a.createElement("div",{className:F.a.todolistTitle},c.a.createElement(X,{title:n.title,changeItemText:function(t){r(t,n.id)}})),c.a.createElement("div",null,c.a.createElement(u.a,{"aria-label":"delete",onClick:i,disabled:"loading"===n.entityStatus},c.a.createElement(Z.a,{color:"secondary"}))))})),tt=a(21),et={},at=function(t){return{type:H.ADD_TASK,task:t}},nt=function(t,e){return{type:H.REMOVE_TASK,todolistId:t,taskId:e}},it=function(t,e,a){return{type:H.CHANGE_TASK_TITLE,todolistId:t,taskId:e,newTitle:a}},ot=function(t,e,a){return{type:H.CHANGE_CHECKED_STATUS,todolistId:t,taskId:e,status:a}},ct=function(t,e){return{type:H.SET_TASKS,todolistId:t,tasks:e}};!function(t){t.ADD_TASK="ADD_TASK",t.REMOVE_TASK="REMOVE_TASK",t.CHANGE_TASK_TITLE="CHANGE_TASK_TITLE",t.CHANGE_CHECKED_STATUS="CHANGE_CHECKED_STATUS",t.SET_TASKS="SET_TASKS"}(H||(H={}));var rt=c.a.memo((function(t){var e=t.task,a=t.todolistId,i=(Object(O.c)((function(t){return t.app.status})),Object(O.b)()),r=function(t){i(function(t,e,a){return function(n,i){var o=i().tasks[t].find((function(t){return t.id===e}));if(!o)throw console.warn("task not found in the state"),new Error("task not found in the state");var c={deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,status:a,title:o.title};n(L("loading")),D(t,e,c).then((function(i){0===i.data.resultCode?(n(ot(t,e,a)),n(L("succeeded"))):K(i.data,n)})).catch((function(t){x(t,n)}))}}(a,e.id,t.currentTarget.checked?n.Completed:n.New))},l=Object(o.useCallback)((function(t){var n,o,c;i((n=a,o=e.id,c=t,function(t,e){var a=e().tasks[n].find((function(t){return t.id===o}));if(!a)throw console.warn("task not found in the state"),new Error("task not found in the state");var i={deadline:a.deadline,description:a.description,priority:a.priority,startDate:a.startDate,status:a.status,title:c};t(L("loading")),D(n,o,i).then((function(e){0===e.data.resultCode?(t(it(n,o,c)),t(L("succeeded"))):K(e.data,t)})).catch((function(e){x(e,t)}))}))}),[i]);return c.a.createElement("div",{key:e.id,className:"".concat(F.a.task," + ").concat(e.status===n.Completed?F.a.taskCheckbox:"")},c.a.createElement("div",null,c.a.createElement("input",{type:"checkbox",checked:e.status===n.Completed,onClick:function(t){r(t)}})),c.a.createElement("div",{className:F.a.taskTitle},c.a.createElement(X,{title:e.title,changeItemText:function(t){l(t)}})),c.a.createElement("div",{className:F.a.taskBtn},c.a.createElement(u.a,{"aria-label":"delete",onClick:function(){var t,n;i((t=a,n=e.id,function(e){e(L("loading")),w(t,n).then((function(a){0===a.data.resultCode?(e(nt(t,n)),e(L("succeeded"))):K(a.data,e)})).catch((function(t){x(t,e)}))}))}},c.a.createElement(Z.a,null))))})),lt=c.a.memo((function(t){var e=t.changeTodolistTitle,a=t.todolist,i=t.newArrTasks,r=t.removeTodolist,l=t.demo,s=void 0!==l&&l,d=(Object(Q.a)(t,["changeTodolistTitle","todolist","newArrTasks","removeTodolist","demo"]),Object(O.b)());Object(o.useEffect)((function(){var t;s||d((t=a.id,function(e){e(L("loading")),g(t).then((function(a){e(ct(t,a.data.items)),e(L("succeeded"))}))}))}),[]);var u=i;"active"===a.filter&&(u=i.filter((function(t){return t.status===n.New}))),"completed"===a.filter&&(u=i.filter((function(t){return t.status===n.Completed})));var f=Object(o.useCallback)((function(){d(U(a.id,"all"))}),[d,a.id]),m=Object(o.useCallback)((function(){d(U(a.id,"active"))}),[d,a.id]),E=Object(o.useCallback)((function(){d(U(a.id,"completed"))}),[d,a.id]),b=Object(o.useCallback)((function(t){var e,n;d((e=a.id,n=t,function(t){t(L("loading")),y(e,n).then((function(e){0===e.data.resultCode?(t(at(e.data.data.item)),t(L("succeeded"))):K(e.data,t)})).catch((function(e){x(e,t)}))}))}),[d,a.id]);return c.a.createElement("div",{className:F.a.todolist},c.a.createElement("div",null,c.a.createElement($,{removeTodolist:r,changeTodolistTitle:e,todolist:a}),c.a.createElement(q,{addNewItem:b,disabled:"loading"===a.entityStatus}),c.a.createElement("div",{className:F.a.tasks},u.map((function(t){return c.a.createElement(rt,{key:t.id,task:t,todolistId:a.id})})))),c.a.createElement("div",{className:F.a.filterButtons},c.a.createElement(T.a,{onClick:f,variant:"all"===a.filter?"outlined":"contained",size:"small",style:{margin:"2px",width:"78px",fontSize:"11px"}}," All"),c.a.createElement(T.a,{onClick:m,variant:"active"===a.filter?"outlined":"contained",size:"small",style:{margin:"2px",width:"78px",fontSize:"11px"}},"Active"),c.a.createElement(T.a,{onClick:E,variant:"completed"===a.filter?"outlined":"contained",size:"small",style:{margin:"2px",width:"78px",fontSize:"11px"}},"Completed")))})),st=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(O.c)((function(t){return t.todolists})),i=Object(O.c)((function(t){return t.tasks})),r=Object(O.b)();Object(o.useEffect)((function(){a||r((function(t){t(L("loading")),C().then((function(e){t({type:"SET_TODOLISTS",todolists:e}),t(L("succeeded"))})).catch((function(e){x(e,t)}))}))}),[]);var l=Object(o.useCallback)((function(t){var e;r((e=t,function(t){t(L("loading")),h(e).then((function(e){0===e.resultCode?(t({type:"ADD_TODOLIST",todolist:e.data.item}),t(L("succeeded"))):K(e,t)})).catch((function(e){x(e,t)}))}))}),[r]),s=Object(o.useCallback)((function(t,e){r(function(t,e){return function(a){a(L("loading")),A(t,e).then((function(n){0===n.data.resultCode?(a({type:"CHANGE_TODOLIST_TITLE",id:t,newTitle:e}),a(L("succeeded"))):K(n.data,a)})).catch((function(t){x(t,a)}))}}(e,t))}),[r]),d=Object(o.useCallback)((function(t){var e;r((e=t,function(t){t(L("loading")),t({type:"CHANGE_TODOLIST_ENTITY_STATUS",id:e,status:"loading"}),I(e).then((function(a){0===a.data.resultCode?(t(function(t){return{type:"REMOVE_TODOLIST",id:t}}(e)),t(L("succeeded"))):K(a.data,t)})).catch((function(e){x(e,t)}))}))}),[r]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(V.a,{container:!0,style:{padding:"10px"}},c.a.createElement("div",{className:"addTodolist"},c.a.createElement("div",{className:"addTodolistTitle"},"Add new TodoList:"),c.a.createElement(q,{addNewItem:function(t){l(t)}}))),c.a.createElement(V.a,{container:!0},c.a.createElement("div",{className:"allTodolists"},n.map((function(t){var e=i[t.id];return c.a.createElement(V.a,{item:!0},c.a.createElement(M.a,{elevation:5},c.a.createElement(lt,{key:t.id,todolist:t,newArrTasks:e,removeTodolist:d,changeTodolistTitle:s,demo:a})))})))))},dt=a(169),ut=a(167);function ft(t){return c.a.createElement(ut.a,Object.assign({elevation:6,variant:"filled"},t))}function Tt(){var t=Object(O.c)((function(t){return t.app.error})),e=Object(O.b)(),a=function(t,a){"clickaway"!==a&&e(R(null))};return c.a.createElement("div",null,c.a.createElement(dt.a,{open:null!==t,autoHideDuration:6e3,onClose:a},c.a.createElement(ft,{onClose:a,severity:"error"},t)))}var mt=function(t){var e=t.demo,a=void 0!==e&&e,n=Object(O.c)((function(t){return t.app.status}));return c.a.createElement("div",{className:"app"},c.a.createElement(s.a,{position:"static"},c.a.createElement(d.a,null,c.a.createElement(u.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(b.a,null)),c.a.createElement(f.a,{variant:"h6"}," "),c.a.createElement(T.a,{color:"inherit"}," ")),"loading"===n&&c.a.createElement(m.a,{color:"secondary"})),c.a.createElement(E.a,null,c.a.createElement(st,{demo:a})),c.a.createElement("div",{className:"snackBar"},c.a.createElement(Tt,null)))},Et=a(31),bt=a(77),Ot=Object(Et.c)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case H.ADD_TASK:return Object(p.a)(Object(p.a)({},t),{},Object(tt.a)({},e.task.todoListId,[e.task].concat(Object(_.a)(t[e.task.todoListId]))));case H.REMOVE_TASK:return Object(p.a)(Object(p.a)({},t),{},Object(tt.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case H.CHANGE_TASK_TITLE:return Object(p.a)(Object(p.a)({},t),{},Object(tt.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(p.a)(Object(p.a)({},t),{},{title:e.newTitle}):t}))));case H.CHANGE_CHECKED_STATUS:return Object(p.a)(Object(p.a)({},t),{},Object(tt.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(p.a)(Object(p.a)({},t),{},{status:e.status}):t}))));case"ADD_TODOLIST":return Object(p.a)(Object(p.a)({},t),{},Object(tt.a)({},e.todolist.id,[]));case"REMOVE_TODOLIST":var a=Object(p.a)({},t);return delete a[e.id],a;case"SET_TODOLISTS":var n=Object(p.a)({},t);return e.todolists.forEach((function(t){return n[t.id]=[]})),n;case H.SET_TASKS:return Object(p.a)(Object(p.a)({},t),{},Object(tt.a)({},e.todolistId,e.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_TODOLIST":return[Object(p.a)(Object(p.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(_.a)(t));case"REMOVE_TODOLIST":return Object(_.a)(t.filter((function(t){return t.id!==e.id})));case"CHANGE_TODOLIST_TITLE":return t.map((function(t){return t.id===e.id?Object(p.a)(Object(p.a)({},t),{},{title:e.newTitle}):t}));case"CHANGE_TODOLIST_FILTER_VALUE":return t.map((function(t){return t.id===e.id?Object(p.a)(Object(p.a)({},t),{},{filter:e.newFilterValue}):t}));case"CHANGE_TODOLIST_ENTITY_STATUS":return t.map((function(t){return t.id===e.id?Object(p.a)(Object(p.a)({},t),{},{entityStatus:e.status}):t}));case"SET_TODOLISTS":return e.todolists.map((function(t){return Object(p.a)(Object(p.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"todolist/appReducer/SET_STATUS":return Object(p.a)(Object(p.a)({},t),{},{status:e.status});case"todolist/appReducer/SET_ERROR":return Object(p.a)(Object(p.a)({},t),{},{error:e.error});default:return t}}}),pt=Object(Et.d)(Ot,Object(Et.a)(bt.a));window.store=pt,l.a.render(c.a.createElement(O.a,{store:pt},c.a.createElement(mt,null)),document.getElementById("root"))},17:function(t,e,a){t.exports={todolist:"Todolist_todolist__1sKHV",task:"Todolist_task__2CoXw",taskInput:"Todolist_taskInput__1YGyF",taskCheckbox:"Todolist_taskCheckbox__3E8rg",taskTitle:"Todolist_taskTitle__PPMPR",error:"Todolist_error__3tGi2",arrayInputAddTasks:"Todolist_arrayInputAddTasks__2i-6M",activeButton:"Todolist_activeButton__1Ua8V",todolistHeader:"Todolist_todolistHeader__1Sc5z",todolistTitle:"Todolist_todolistTitle__2QeD0"}},87:function(t,e,a){t.exports=a(121)},92:function(t,e,a){},93:function(t,e,a){}},[[87,1,2]]]);
//# sourceMappingURL=main.3cea7c76.chunk.js.map